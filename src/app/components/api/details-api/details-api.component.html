<div style="margin: 50px;">
    <ng-template #content let-modal>
        <div class="modal-header">
          <h4 class="modal-title">{{ translateService.instant('api.delete') }} {{ restApi.name }}</h4>
          <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p><span style="font-weight: 500;" >{{ translateService.instant('api.cant_undo_action') }}</span> {{ translateService.instant('api.delete_repository_question') }}</p>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-danger" (click)="deleteAPI()">{{ translateService.instant('api.delete') }}</button>
            <button type="button" class="btn btn-light" (click)="modal.close('Close click')">{{ translateService.instant('api.cancel') }}</button>
        </div>
    </ng-template>
    <div *ngIf="restApi">
        <div class="centerInlineBlock">
            <img [src]="restApi.logoUrl" style="margin: auto; width:250px; max-width: 90%; height: auto;"/>
        </div>
        <div class="centerVerticalBlock" style="margin-left: 2%;width: 73%;display: inline-block">
            <div class="row" style="line-height: 100px;margin-right: 0;">
                <span style="font-size: xxx-large;">{{ restApi.name }}</span>
                <span *ngIf="provider != null" style="font-size: x-large;margin-left: 10%;">{{ translateService.instant('api.provided_by') }}
                    <button type="button" class="btn btn-light" style="font-size: x-large;color: coral;font-weight: 500;" (click)="goToProvider()">{{ provider.name }}</button>
                </span>
                <span *ngIf="activeRole == 'Contributor' || activeRole == 'Administrator'" style="margin-left: auto;margin-right: 50px;">
                    <button type="button" class="btn btn-info" style="font-size: x-large;" (click)="goToEditAPI()">{{ translateService.instant('api.edit') }}</button>
                </span>
            </div>
            <div class="row">
                <p style="font-size: medium;font-weight: 500; width: 100%;">
                    <span *ngIf="lastContributor != null" style="margin-right: 10%;">Updated by
                        <button type="button" class="btn btn-light" style="color: coral;font-weight: 500;" (click)="goToContributor()">{{ lastContributor.username }}</button>
                        <span>{{ getMomentFromNow() }}</span>
                    </span>
                    <span></span>
                </p>
            </div>
            <div class="row">
                <p style="font-size: small;font-style: italic; width: 100%;">
                    <span style="margin-right: 10%;">{{ translateService.instant('api.last_version') }} :
                        <span style="font-weight: bold;">{{ restApi.versions[0].number }}</span>
                    </span>
                    <span *ngIf="restApi.metadata.category">{{ translateService.instant('api.categories') }} : {{ extractCategories(restApi) }}</span>
                </p>
            </div>
            <div class="row" style="min-height: 100px;">
                <p *ngIf="restApi.metadata && restApi.metadata.description; else noDescriptionAlt" style="font-size: medium;" [innerHTML]="restApi.metadata.description" ></p>
                <ng-template #noDescriptionAlt style="font-size: medium;">No description found.</ng-template>
            </div>
        </div>
        <div class="row" style="margin-left: 25%; margin-right: 50px;font-size: large;">
            <button *ngIf="restApi.metadata.termsOfService" type="button" class="btn btn-light referenceLink" (click)="displayModalToS()">{{ translateService.instant('api.terms_of_service') }}</button>
            <button *ngIf="apiDocName" type="button" (click)="downloadOriginalDocumentation()" class="btn btn-light referenceLink">{{ translateService.instant('api.original_documentation') }}</button>
            <button *ngIf="restApi.metadata.url" type="button" class="btn btn-light referenceLink" (click)="redirectToAPIRoot()">{{ translateService.instant('api.api_url') }}</button>
            <button *ngIf="activeRole == 'Contributor' || activeRole == 'Administrator'" type="button" class="btn btn-outline-danger" style="margin-left: auto;font-size: x-large;" (click)="openModalDeleteAPI(content)">{{ translateService.instant('api.delete') }}</button>
        </div>
    </div>
    <div style="height: auto;margin-top: 50px;">
        
        <div>
            <div style="display:inline-block; width: 400px; vertical-align: top;">
                <p style="font-size: xx-large; text-align: center; margin-right: 50px;">{{ translateService.instant('api.version.details') }}</p>
                <div class="row versionList">
                    <div *ngFor="let v of versions" class="row versionRow">
                        <div class="versionMenuDropDown">
                            <fa-icon [icon]="faCaretSquareDown"></fa-icon>
                        </div>
                        <div class="versionSelect">
                            <p style="font-weight: bold; text-align: center;">{{ v.version.number }}</p>
                            <p style=" text-align: justify;">{{ v.version.description }}</p>
                        </div>
                    </div>
                </div>
            </div>
            <app-details-version *ngIf="selectedVersion" [version]=selectedVersion></app-details-version>
        </div>
    </div>
</div>
